{"ast":null,"code":"var _jsxFileName = \"D:\\\\Project\\\\MAIN\\\\CODE\\\\BTP_Project-master\\\\BTP_Project-master\\\\client\\\\src\\\\components\\\\camera.jsx\";\nimport React, { Component } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class CameraFeed extends Component {\n  constructor(...args) {\n    super(...args);\n    this.takePhoto = () => {\n      const {\n        sendFile\n      } = this.props;\n      const context = this.canvas.getContext(\"2d\");\n      context.drawImage(this.videoPlayer, 0, 0, 680, 360);\n      this.canvas.toBlob(sendFile);\n      this.props.closeWindow();\n    };\n  }\n  processDevices(devices) {\n    devices.forEach(device => {\n      console.log(device.label);\n      if (device.kind === \"videoinput\") this.setVideoDevice(device);\n    });\n  }\n  async setVideoDevice(device) {\n    var _this$videoPlayer;\n    const {\n      deviceId\n    } = device;\n    const stream = await navigator.mediaDevices.getUserMedia({\n      audio: false,\n      video: {\n        deviceId\n      }\n    });\n    console.log(\"stream\", stream);\n    if (this.videoPlayer && stream !== null) this.videoPlayer.srcObject = stream;\n    (_this$videoPlayer = this.videoPlayer) === null || _this$videoPlayer === void 0 ? void 0 : _this$videoPlayer.play();\n  }\n  async componentDidMount() {\n    const allDevices = await navigator.mediaDevices.enumerateDevices();\n    console.log(\"allDevices\", allDevices);\n    this.processDevices(allDevices);\n  }\n  async componentWillUnmount() {\n    if (this.videoPlayer && this.videoPlayer.srcObject) this.videoPlayer.srcObject.getTracks().forEach(function (track) {\n      console.log(\"trabck\", track);\n      if (track.readyState === \"live\" && track.kind === \"video\") {\n        track.stop();\n      }\n    });\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"c-camera-feed\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"c-camera-feed__viewer\",\n        children: /*#__PURE__*/_jsxDEV(\"video\", {\n          style: {\n            maxWidth: \"100%\"\n          },\n          ref: ref => {\n            console.log(\"videoref\", ref);\n            if (ref) this.videoPlayer = ref;\n          },\n          width: \"680\",\n          heigh: \"360\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-lg btn-primary\",\n        onClick: this.takePhoto,\n        children: \"Capture Image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"c-camera-feed__stage\",\n        style: {\n          display: \"none\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n          width: \"680\",\n          height: \"360\",\n          ref: ref => this.canvas = ref\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this);\n  }\n}","map":{"version":3,"names":["React","Component","jsxDEV","_jsxDEV","CameraFeed","constructor","args","takePhoto","sendFile","props","context","canvas","getContext","drawImage","videoPlayer","toBlob","closeWindow","processDevices","devices","forEach","device","console","log","label","kind","setVideoDevice","_this$videoPlayer","deviceId","stream","navigator","mediaDevices","getUserMedia","audio","video","srcObject","play","componentDidMount","allDevices","enumerateDevices","componentWillUnmount","getTracks","track","readyState","stop","render","className","children","style","maxWidth","ref","width","heigh","fileName","_jsxFileName","lineNumber","columnNumber","onClick","display","height"],"sources":["D:/Project/MAIN/CODE/BTP_Project-master/BTP_Project-master/client/src/components/camera.jsx"],"sourcesContent":["import React, { Component } from \"react\";\n\nexport default class CameraFeed extends Component {\n  processDevices(devices) {\n    devices.forEach((device) => {\n      console.log(device.label);\n      if (device.kind === \"videoinput\") this.setVideoDevice(device);\n    });\n  }\n\n  async setVideoDevice(device) {\n    const { deviceId } = device;\n    const stream = await navigator.mediaDevices.getUserMedia({\n      audio: false,\n      video: { deviceId },\n    });\n    console.log(\"stream\", stream);\n    if (this.videoPlayer && stream !== null)\n      this.videoPlayer.srcObject = stream;\n    this.videoPlayer?.play();\n  }\n\n  async componentDidMount() {\n    const allDevices = await navigator.mediaDevices.enumerateDevices();\n    console.log(\"allDevices\", allDevices);\n    this.processDevices(allDevices);\n  }\n  async componentWillUnmount() {\n    if (this.videoPlayer && this.videoPlayer.srcObject)\n      this.videoPlayer.srcObject.getTracks().forEach(function (track) {\n        console.log(\"trabck\", track);\n        if (track.readyState === \"live\" && track.kind === \"video\") {\n          track.stop();\n        }\n      });\n  }\n\n  takePhoto = () => {\n    const { sendFile } = this.props;\n    const context = this.canvas.getContext(\"2d\");\n    context.drawImage(this.videoPlayer, 0, 0, 680, 360);\n    this.canvas.toBlob(sendFile);\n    this.props.closeWindow();\n  };\n\n  render() {\n    return (\n      <div className=\"c-camera-feed\">\n        <div className=\"c-camera-feed__viewer\">\n          <video\n            style={{ maxWidth: \"100%\" }}\n            ref={(ref) => {\n              console.log(\"videoref\", ref);\n              if (ref) this.videoPlayer = ref;\n            }}\n            width=\"680\"\n            heigh=\"360\"\n          />\n        </div>\n        <button className=\"btn btn-lg btn-primary\" onClick={this.takePhoto}>\n          Capture Image\n        </button>\n        <div className=\"c-camera-feed__stage\" style={{ display: \"none\" }}>\n          <canvas width=\"680\" height=\"360\" ref={(ref) => (this.canvas = ref)} />\n        </div>\n      </div>\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}