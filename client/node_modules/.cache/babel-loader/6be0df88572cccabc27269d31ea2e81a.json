{"ast":null,"code":"import React,{useState}from\"react\";import Camera from\"./camerautil\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const FileUpload=props=>{// let uploadInput = \"\";\nconst[preview,setPreview]=useState();const[uploadImage,setUploadImage]=useState();const handleUploadImage=()=>{const data=new FormData();console.log(\"============here===========\");data.append(\"file\",uploadImage);// data.append(\"file\", uploadInput.files[0]);\n// data.append(\"filename\", this.fileName.value);\nfetch(props.url,{method:\"POST\",body:data}).then(response=>{response.json().then(body=>{props.setImageOutputUrl(\"http://localhost:5000/display/\".concat(body.dataOutput,\"?\").concat(Date.now()));props.setImageInputUrl(\"http://localhost:5000/display/\".concat(body.dataInput,\"?\").concat(Date.now()));props.setText(body.text);props.speak(body.text);setPreview(undefined);});}).catch(err=>{console.log(err);});};const onSelectFile=e=>{if(!e.target.files||e.target.files.length===0){setPreview(undefined);return;}setUploadImage(e.target.files[0]);const objectUrl=URL.createObjectURL(e.target.files[0]);setPreview(objectUrl);};return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"container \",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:ev=>{ev.preventDefault();},children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-center\",children:\"Please select any file or capture photo from webcam/camera.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-6 p-4\",style:{border:\"4px solid #f8f9fa\",borderRight:\"2px solid rgba(126, 1188, 159,1) \"},children:/*#__PURE__*/_jsx(\"input\",{// ref={(ref) => {\n//   uploadInput = ref;\n// }}\nclassName:\"form-control btn-outline-secondary\",type:\"file\",onChange:onSelectFile})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6 p-4\",style:{border:\"4px solid #f8f9fa\",borderLeft:\"2px solid rgba(126, 1188, 159,1) \"},children:/*#__PURE__*/_jsx(Camera,{sendFile:async file=>{// var uploadInput = file;\nconst objectUrl=URL.createObjectURL(file);setPreview(objectUrl);setUploadImage(file);console.log(\"camera\");}})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row px-4 m-2 mx-5\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",disabled:!preview,onClick:()=>handleUploadImage(),children:\"Upload\"})})]})}),preview&&/*#__PURE__*/_jsxs(\"div\",{style:{border:\"4px solid #f8f9fa\",padding:\"10px\",margin:\"10px\",textAlign:\"center\"},children:[/*#__PURE__*/_jsx(\"h3\",{className:\"display-5\",children:\"Preview\"}),/*#__PURE__*/_jsx(\"img\",{style:{maxWidth:\"50%\"},src:preview,alt:\"Uploaded\"})]})]});};export default FileUpload;","map":{"version":3,"names":["React","useState","Camera","jsx","_jsx","jsxs","_jsxs","FileUpload","props","preview","setPreview","uploadImage","setUploadImage","handleUploadImage","data","FormData","console","log","append","fetch","url","method","body","then","response","json","setImageOutputUrl","concat","dataOutput","Date","now","setImageInputUrl","dataInput","setText","text","speak","undefined","catch","err","onSelectFile","e","target","files","length","objectUrl","URL","createObjectURL","Fragment","children","className","onSubmit","ev","preventDefault","style","border","borderRight","type","onChange","borderLeft","sendFile","file","disabled","onClick","padding","margin","textAlign","maxWidth","src","alt"],"sources":["D:/PROJECTS/ScanVue/client/src/components/FileUpload.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport Camera from \"./camerautil\";\n\nconst FileUpload = (props) => {\n  // let uploadInput = \"\";\n\n  const [preview, setPreview] = useState();\n  const [uploadImage, setUploadImage] = useState();\n  const handleUploadImage = () => {\n    const data = new FormData();\n    console.log(\"============here===========\");\n    data.append(\"file\", uploadImage);\n    // data.append(\"file\", uploadInput.files[0]);\n    // data.append(\"filename\", this.fileName.value);\n    fetch(props.url, {\n      method: \"POST\",\n      body: data,\n    })\n      .then((response) => {\n        response.json().then((body) => {\n          props.setImageOutputUrl(\n            `http://localhost:5000/display/${body.dataOutput}?${Date.now()}`\n          );\n          props.setImageInputUrl(\n            `http://localhost:5000/display/${body.dataInput}?${Date.now()}`\n          );\n          props.setText(body.text);\n          props.speak(body.text);\n          setPreview(undefined);\n        });\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  const onSelectFile = (e) => {\n    if (!e.target.files || e.target.files.length === 0) {\n      setPreview(undefined);\n      return;\n    }\n    setUploadImage(e.target.files[0]);\n    const objectUrl = URL.createObjectURL(e.target.files[0]);\n    setPreview(objectUrl);\n  };\n\n  return (\n    <React.Fragment>\n      <div className=\"container \">\n        <form\n          onSubmit={(ev) => {\n            ev.preventDefault();\n          }}\n        >\n          <p className=\"text-center\">\n            Please select any file or capture photo from webcam/camera.\n          </p>\n          <div className=\"row\">\n            <div\n              className=\"col-6 p-4\"\n              style={{\n                border: \"4px solid #f8f9fa\",\n                borderRight: \"2px solid rgba(126, 1188, 159,1) \",\n              }}\n            >\n              <input\n                // ref={(ref) => {\n                //   uploadInput = ref;\n                // }}\n                className=\"form-control btn-outline-secondary\"\n                type=\"file\"\n                onChange={onSelectFile}\n              />\n            </div>\n            {/* <div>\n          <input\n            ref={(ref) => {\n              this.fileName = ref;\n            }}\n            type=\"text\"\n            placeholder=\"Enter the desired name of file\"\n          />\n        </div> */}\n            <br />\n            <div\n              className=\"col-6 p-4\"\n              style={{\n                border: \"4px solid #f8f9fa\",\n                borderLeft: \"2px solid rgba(126, 1188, 159,1) \",\n              }}\n            >\n              <Camera\n                sendFile={async (file) => {\n                  // var uploadInput = file;\n                  const objectUrl = URL.createObjectURL(file);\n                  setPreview(objectUrl);\n                  setUploadImage(file);\n                  console.log(\"camera\");\n                }}\n              />\n            </div>\n          </div>\n          <div className=\"row px-4 m-2 mx-5\">\n            <button\n              className=\"btn btn-success\"\n              disabled={!preview}\n              onClick={() => handleUploadImage()}\n            >\n              Upload\n            </button>\n          </div>\n        </form>\n      </div>\n      {preview && (\n        <div\n          style={{\n            border: \"4px solid #f8f9fa\",\n            padding: \"10px\",\n            margin: \"10px\",\n            textAlign: \"center\",\n          }}\n        >\n          <h3 className=\"display-5\">Preview</h3>\n          <img style={{ maxWidth: \"50%\" }} src={preview} alt=\"Uploaded\" />\n        </div>\n      )}\n    </React.Fragment>\n  );\n};\n\nexport default FileUpload;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}